
Some good resources include:
## agentdecompile: MCP Server for Ghidra (Ghidra 12.0+, Java 21)
## agentdecompile AI Coding Guide (read first)

- **Architecture**: Ghidra plugin hosts embedded Jetty MCP server; [agentdecompileApplicationPlugin](src/main/java/agentdecompile/plugin/agentdecompileApplicationPlugin.java) wires lifecycle/program tracking and starts [McpServerManager](src/main/java/agentdecompile/server/McpServerManager.java); headless launcher and Python CLI wrap the same server. Transport is HTTP streamable at http://localhost:8080/mcp/message (no SSE).
- **Layout**: Core Java in [src/main/java/agentdecompile](src/main/java/agentdecompile); utilities in [src/main/java/agentdecompile/util](src/main/java/agentdecompile/util); tools in [src/main/java/agentdecompile/tools](src/main/java/agentdecompile/tools) (17 providers); resources in [src/main/java/agentdecompile/resources](src/main/java/agentdecompile/resources); headless entry in [src/main/java/agentdecompile/headless](src/main/java/agentdecompile/headless); Python CLI in [src/agentdecompile_cli](src/agentdecompile_cli); Python tests in [tests](tests).
- **Build**: Target Java 21, Ghidra 12.0+. Set GHIDRA_INSTALL_DIR. Use `gradle` (no wrapper) for `buildExtension`/`install`; extension ZIP ends up in dist/. Jetty/Jackson pinned for MCP SDK 0.17.0 in [build.gradle](build.gradle).
- **Tests**: JUnit 4 only. `gradle test --info` (unit), `gradle integrationTest --info` (headed, java.awt.headless=false, forkEvery=1), `gradle check` depends on both. Python: `uv sync`; `uv run pytest` with markers unit/integration/e2e; see [tests/README.md](tests/README.md). Integration tests must assert real program state (Function.getParameters, DataType.isEquivalent), not just MCP responses.
- **Program identity**: All tools use `programPath` (Ghidra project pathname like /foo.exe). GUI mode lets you omit it for the current Code Browser selection. Use [ProgramLookupUtil.getValidatedProgram](src/main/java/agentdecompile/util/ProgramLookupUtil.java).
- **Must-use utilities**: [AddressUtil.formatAddress](src/main/java/agentdecompile/util/AddressUtil.java) for JSON addresses; [DataTypeParserUtil](src/main/java/agentdecompile/util/DataTypeParserUtil.java) for type strings; [AbstractToolProvider](src/main/java/agentdecompile/tools/ToolProvider.java) helpers for args/pagination; HighFunctionDBUtil.updateDBVariable for variable persistence; SymbolUtil.isDefaultSymbolName for filtering defaults.
- **Tool patterns**: Define schemas and register via AbstractToolProvider.registerTool; automatic wrapping converts IllegalArgumentException/ProgramValidationException to JSON errors. Always wrap mutations in Ghidra transactions and dispose DecompInterface. Follow per-domain guidance in package CLAUDE.md files (e.g., [src/main/java/agentdecompile/tools/decompiler/CLAUDE.md](src/main/java/agentdecompile/tools/decompiler/CLAUDE.md)).
- **Resources**: Resource providers live in [src/main/java/agentdecompile/resources](src/main/java/agentdecompile/resources); URI scheme `ghidra://...`; current ProgramListResource is registered in McpServerManager.
- **Headless/CLI**: Java launcher [src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java](src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java) and helper script scripts/agentdecompile_headless_server.py. Python CLI entry [src/agentdecompile_cli/__main__.py](src/agentdecompile_cli/__main__.py) proxies stdioâ†”HTTP; stdio mode requires clean stdout.
- **Configuration**: Defaults via agentdecompile_* env vars (see README); example [.env.example](.env.example). ConfigManager uses Ghidra ToolOptions in GUI; File/InMemory backends in headless/CLI.
- **Patterns to remember**: Use pagination params on large listings; keep JSON small but include addresses/namespaces/xrefs; prefer concrete generics and Optional; avoid direct Ghidra API when a util exists; filter default symbol names.
- **Common pitfalls**: Forgetting GHIDRA_INSTALL_DIR; using ./gradlew; skipping transactions; leaking DecompInterface; not forking integration tests; noisy stdout in stdio mode; returning raw addresses without AddressUtil.
- **Key references**: Overview in [CLAUDE.md](CLAUDE.md) and [AGENTS.md](AGENTS.md); tool catalog in [new_tool_list.md](new_tool_list.md); deep package guidance in CLAUDE.md files under [src/main/java/agentdecompile](src/main/java/agentdecompile).