
Some good resources include:
## agentdecompile: MCP Server for Ghidra (Ghidra 12.0+, Java 21)
## agentdecompile AI Coding Guide (read first)

- **Architecture**: Ghidra plugin hosts embedded Jetty MCP server; [agentdecompileApplicationPlugin](src/main/java/agentdecompile/plugin/agentdecompileApplicationPlugin.java) wires lifecycle/program tracking and starts [McpServerManager](src/main/java/agentdecompile/server/McpServerManager.java); headless launcher and Python CLI wrap the same server. Transport is HTTP streamable at http://localhost:8080/mcp/message (no SSE).
- **Layout**: Core Java in [src/main/java/agentdecompile](src/main/java/agentdecompile); utilities in [src/main/java/agentdecompile/util](src/main/java/agentdecompile/util); tools in [src/main/java/agentdecompile/tools](src/main/java/agentdecompile/tools) (17 providers); resources in [src/main/java/agentdecompile/resources](src/main/java/agentdecompile/resources); headless entry in [src/main/java/agentdecompile/headless](src/main/java/agentdecompile/headless); Python CLI in [src/agentdecompile_cli](src/agentdecompile_cli); Python tests in [tests](tests).
- **Build**: Target Java 21, Ghidra 12.0+. Set `GHIDRA_INSTALL_DIR`. The repository uses system Gradle (no Gradle wrapper). `build-and-install.ps1` on Windows wraps `gradle buildExtension` and installs the produced extension `.zip` into `<GHIDRA_INSTALL_DIR>/Ghidra/Extensions`.
	- Prefer resolving `gradle` from PATH; scripts will prompt for `GRADLE_PATH` if not found. For automation, pass `-GradlePath 'C:\Gradle\bin\gradle.bat'` or set `GRADLE_PATH` in `.env`/environment.
- **Tests**: JUnit 4 only. `gradle test --info` (unit), `gradle integrationTest --info` (headed, java.awt.headless=false, forkEvery=1), `gradle check` depends on both. Python: `uv sync`; `uv run pytest` with markers unit/integration/e2e; see [tests/README.md](tests/README.md). Integration tests must assert real program state (Function.getParameters, DataType.isEquivalent), not just MCP responses.
- **Program identity**: All tools use `programPath` (Ghidra project pathname like /foo.exe). GUI mode lets you omit it for the current Code Browser selection. Use [ProgramLookupUtil.getValidatedProgram](src/main/java/agentdecompile/util/ProgramLookupUtil.java).
- **Must-use utilities**: [AddressUtil.formatAddress](src/main/java/agentdecompile/util/AddressUtil.java) for JSON addresses; [DataTypeParserUtil](src/main/java/agentdecompile/util/DataTypeParserUtil.java) for type strings; [AbstractToolProvider](src/main/java/agentdecompile/tools/ToolProvider.java) helpers for args/pagination; HighFunctionDBUtil.updateDBVariable for variable persistence; SymbolUtil.isDefaultSymbolName for filtering defaults.
- **Tool patterns**: Define schemas and register via AbstractToolProvider.registerTool; automatic wrapping converts IllegalArgumentException/ProgramValidationException to JSON errors. Always wrap mutations in Ghidra transactions and dispose DecompInterface. Follow per-domain guidance in package CLAUDE.md files (e.g., [src/main/java/agentdecompile/tools/decompiler/CLAUDE.md](src/main/java/agentdecompile/tools/decompiler/CLAUDE.md)).
- **Resources**: Resource providers live in [src/main/java/agentdecompile/resources](src/main/java/agentdecompile/resources); URI scheme `ghidra://...`; current ProgramListResource is registered in McpServerManager.
- **Headless/CLI**: Java launcher [src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java](src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java) and helper script scripts/agentdecompile_headless_server.py. Python CLI entry [src/agentdecompile_cli/__main__.py](src/main/java/agentdecompile_cli/__main__.py) proxies stdio↔HTTP; stdio mode requires clean stdout. To keep the MCP HTTP endpoint available, run the CLI in a dedicated foreground terminal and do not let the process exit (the CLI creates ephemeral temp projects by default).
 - **Headless/CLI**: Java launcher [src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java](src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java) and helper script scripts/agentdecompile_headless_server.py. Python CLI entry [src/agentdecompile_cli/__main__.py](src/main/java/agentdecompile_cli/__main__.py) proxies stdio↔HTTP; stdio mode requires clean stdout. To keep the MCP HTTP endpoint available, run the CLI in a dedicated foreground terminal and do not let the process exit (the CLI creates ephemeral temp projects by default).
	- Enabling the extension (GUI): `File -> Install Extensions` then click `AgentDecompile`.
	- Configure server options (GUI): `File -> Configure -> AgentDecompile Server Options` to set host/port/credentials.
	- To run Ghidra for configuration: use `run_ghidra.bat` on Windows or `./run_ghidra` on Linux/macOS. Open/create a project, open the Code Browser, then `File -> Extensions` to enable `AgentDecomp` and `PyGhidra`.
- **Configuration**: Defaults via agentdecompile_* env vars (see README); example [.env.example](.env.example). ConfigManager uses Ghidra ToolOptions in GUI; File/InMemory backends in headless/CLI.
- **Patterns to remember**: Use pagination params on large listings; keep JSON small but include addresses/namespaces/xrefs; prefer concrete generics and Optional; avoid direct Ghidra API when a util exists; filter default symbol names.
- **Common pitfalls**: Forgetting `GHIDRA_INSTALL_DIR`; using `./gradlew` (this repo has no wrapper); skipping transactions; leaking DecompInterface; not forking integration tests; noisy stdout in stdio mode; returning raw addresses without `AddressUtil`.
	- Locked extension files: If the extension install fails due to file locks (AgentDecompile.jar), stop any Python/Ghidra processes that reference the extension before reinstalling.
	- Python dependency pins (e.g. old `pandas`) may fail on newer Python versions — prefer using Python 3.11/3.12 or update pinned versions.

### Non-interactive Gradle installation notes for automation
- Ubuntu/Fedora: prefer SDKMAN! (`curl -s "https://get.sdkman.io" | bash && source "$HOME/.sdkman/bin/sdkman-init.sh" && sdk install gradle`)
- macOS: `brew install gradle` or SDKMAN!
- Windows: `choco install gradle -y` (requires admin) or `scoop install gradle` for a user-level install.

### Example decompile server (optional)
- Host: biodecompwarehouse.beatapostapita.bolabaden.org
- User: OldRepublicDevs
- Password: changeme (may also be `MuchaShakaPaka`) — verify with admin.

### Quick automation checklist for CI/agents
1. Ensure `java -version` shows JDK 17+ and `gradle -v` succeeds.
2. Export `GHIDRA_INSTALL_DIR` and (optionally) `GRADLE_PATH` before invoking `build-and-install.ps1`.
3. Run `build-and-install.ps1 -ProjectDir '<repo>' -GhidraInstallDir '<ghidra>' -GradlePath '<gradle>' -ForceKillLocks` (Windows) or run `gradle buildExtension` and manually unzip `dist/*.zip` into Ghidra's Extensions dir on Linux/macOS.
4. Create Python venv and install the CLI: `python -m venv .venv && .venv/bin/python -m pip install -e .`.
5. Start the CLI in a foreground process for interactive use or wrap it with a service manager for persistent availability.
- **Tests**: JUnit 4 only. `gradle test --info` (unit), `gradle integrationTest --info` (headed, java.awt.headless=false, forkEvery=1), `gradle check` depends on both. Python: `uv sync`; `uv run pytest` with markers unit/integration/e2e; see [tests/README.md](tests/README.md). Integration tests must assert real program state (Function.getParameters, DataType.isEquivalent), not just MCP responses.
- **Program identity**: All tools use `programPath` (Ghidra project pathname like /foo.exe). GUI mode lets you omit it for the current Code Browser selection. Use [ProgramLookupUtil.getValidatedProgram](src/main/java/agentdecompile/util/ProgramLookupUtil.java).
- **Must-use utilities**: [AddressUtil.formatAddress](src/main/java/agentdecompile/util/AddressUtil.java) for JSON addresses; [DataTypeParserUtil](src/main/java/agentdecompile/util/DataTypeParserUtil.java) for type strings; [AbstractToolProvider](src/main/java/agentdecompile/tools/ToolProvider.java) helpers for args/pagination; HighFunctionDBUtil.updateDBVariable for variable persistence; SymbolUtil.isDefaultSymbolName for filtering defaults.
- **Tool patterns**: Define schemas and register via AbstractToolProvider.registerTool; automatic wrapping converts IllegalArgumentException/ProgramValidationException to JSON errors. Always wrap mutations in Ghidra transactions and dispose DecompInterface. Follow per-domain guidance in package CLAUDE.md files (e.g., [src/main/java/agentdecompile/tools/decompiler/CLAUDE.md](src/main/java/agentdecompile/tools/decompiler/CLAUDE.md)).
- **Resources**: Resource providers live in [src/main/java/agentdecompile/resources](src/main/java/agentdecompile/resources); URI scheme `ghidra://...`; current ProgramListResource is registered in McpServerManager.
- **Headless/CLI**: Java launcher [src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java](src/main/java/agentdecompile/headless/agentdecompileHeadlessLauncher.java) and helper script scripts/agentdecompile_headless_server.py. Python CLI entry [src/agentdecompile_cli/__main__.py](src/agentdecompile_cli/__main__.py) proxies stdio↔HTTP; stdio mode requires clean stdout.
- **Configuration**: Defaults via agentdecompile_* env vars (see README); example [.env.example](.env.example). ConfigManager uses Ghidra ToolOptions in GUI; File/InMemory backends in headless/CLI.
- **Patterns to remember**: Use pagination params on large listings; keep JSON small but include addresses/namespaces/xrefs; prefer concrete generics and Optional; avoid direct Ghidra API when a util exists; filter default symbol names.
- **Common pitfalls**: Forgetting GHIDRA_INSTALL_DIR; using ./gradlew; skipping transactions; leaking DecompInterface; not forking integration tests; noisy stdout in stdio mode; returning raw addresses without AddressUtil.
- **Key references**: Overview in [CLAUDE.md](CLAUDE.md) and [AGENTS.md](AGENTS.md); tool catalog in [new_tool_list.md](new_tool_list.md); deep package guidance in CLAUDE.md files under [src/main/java/agentdecompile](src/main/java/agentdecompile).